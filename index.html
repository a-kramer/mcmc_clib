<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>mcmc clib</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
    <!--[if lt IE 8]>
	<link rel="stylesheet" href="stylesheets/ie.css">
	<![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
    <div id="header">
      <nav>
        <li class="fork"><a href="https://github.com/a-kramer/mcmc_clib">View On GitHub</a></li>
        <li class="downloads"><a href="https://github.com/a-kramer/mcmc_clib/zipball/master">ZIP</a></li>
        <li class="downloads"><a href="https://github.com/a-kramer/mcmc_clib/tarball/master">TAR</a></li>
        <li class="title">DOWNLOADS</li>
      </nav>
    </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>mcmc clib</h1>
          <p>a C program for <em>simplified manifold Metropolis
              adjusted Langevin algorithm</em> (smmala) sampling
            of <em>ordinary differntial equation</em> (ode) model
            parameters</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/a-kramer">a-kramer</a> (<a href="mailto:andrei.kramer@ist.uni-stuttgart.de?Subject=mcmc_clib">mail</a>)</span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

	<div>
	<p>This software's characteristics:
	  <ul>
	    <li> accepts unnormalized data and reference data (arbitrary units)</li>
	    <li> command line tool</li>
	    <li> samples in logarithmic space</li>
	    <li> multivariate Gaussian prior densities only (in logspace)</li>
	    <li> aimed at HPC use</li>
	    <ul>
	      <li>parallel tempering scheme using MPI</li>
	      <li>parallel simulation of all experiment setups using OpenMP</li>
	    </ul>
	    <li> uses hdf5 for the storage of experimental data and resulting parameter sample</li>
	    <li> uses CVODES solver to obtain numerical solutions to the model's initial value problems</li>
	    <ul>
	      <li> forward sensitivity analysis</li><li> Fisher information</li>
	    </ul>
	  </ul>
	</p>
	</div>
	<div>
	<h2>Alternatives</h2> The software is not developed by
	a <span title="rather one person">team</span> and new features
	are added very slowly.

	Perhaps the biggest drawback is that we do not provide any
	automated build system yet. Compiling is done by inspecting
	and changing the Makefile from tamplates, manually. Fot these
	reasons, it may be better to use an <span title="a more
	professionally developed alternative">alternative</span>
	like <a href="https://www.gnu.org/software/mcsim/">GNU
	MCsim</a> or the matlab
	packages <a href="https://github.com/ICB-DCM/PESTO">PESTO</a>
	&amp; <a href="https://github.com/ICB-DCM/AMICI">AMICI</a>, or
	perhaps even an alternatuve methodology like
	the <a href="https://febs.onlinelibrary.wiley.com/doi/full/10.1111/febs.12276">profile
	  likelihood method</a>.
	</div>
	<div>
	<h1>
	  <a name="installation-instructions" class="anchor"
	  href="#installation-instructions"><span class="octicon
	  octicon-link"></span></a>General Installation
	  Instructions
	</h1>

	<p>The Software uses a shared library as model. Any way to
	  create the shared library will work. We use the vfgen tool
	  for these purposes. The experimental data is stored in hdf5
	  files with agrred upon annotation. The naming rules are
	  listed in the
	  <a href="https://github.com/a-kramer/mcmc_clib/blob/sbtab/doc/documentation.pdf">documentation</a>. This
	  file can be generated using any software that supports hdf5 output
	  (e.g. Matlab, R, python). But, we also provide a program for the
	  conversion of data from <a href="https://github.com/a-kramer/mcmc_clib/blob/sbtab/doc/documentation.pdf">SBtab</a>
	  (tsv) files into an hdf5 file. 
	</p>

	<p>In principle, if a software that can transform
	  an <a href="http://sbml.org">sbml</a> model into cvodes
	  compatible sources exists, then it can, of course, also be
	  used here. We are not aware of such a project.</p>

	<p>For the handling of models, we use
	  the <a href="https://www.sbtab.net/sbtab/default/documentation.html#spec">SBtab
	  file format</a> (but not any of the tools provided by the
	  authors). We use a
	  custom <a href="https://www.r-project.org/">R</a>
	  script <a href="https://github.com/a-kramer/SBtabVFGEN">sbtab_to_vfgen.R</a>
	  to translate models from an <a href="https://en.wikipedia.org/wiki/OpenDocument">OpenDocument</a>
	  Spreadsheet format
	  into a <a href="https://github.com/WarrenWeckesser/vfgen">vfgen</a>
	  <a href="https://github.com/a-kramer/DemoModel/blob/master/vfgen/Demo_vf.xml">vf
	    file</a>. The
	  <a href="https://github.com/a-kramer/DemoModel/">DemoModel</a>
	  repository is an example of how we store and process models
	  using this <span title="the end result can be anything that
	  vfgen supports: matlab, R, GNU
	  Octave"><tt>SBtab&rarr;R&rarr;vfgen&rarr;C</tt></span>
	  workflow. Vfgen calculates the <span title="right hand
	  side">rhs</span> vector field's jacobian (symbolically).
	</p>
	</div>
	<div>
	  <h2>Simulations</h2>
	  <p>The sampler repeatedly solves the initial value problem
	    specified in such a way as to replicate the experimental
	    data and normalises the result in the same way as in the
	    experiment's description. This way arbitrary scale
	    constants are cancelled. The simulations are done via the
	    sundials cvodes solver.</p>
	  
	<pre>
	  <code>
	    External library dependencies
	    For ODE solutions:
              Sundials CVODES 2.7.0
	    
	    For MCMC:
              GSL 
              CBLAS
	      OpenMPI
	      (OpenMP)

	    For VFGEN:
	      GiNaC 
	      mini XML 
	  </code>
	</pre>
	</div>
	<div>
	  <h2>Installation Instructions</h2>
	  <p>Here are some more detailed instructions for installation
	    on <a href="Gentoo">Gentoo</a>, <a href="Arch">Arch</a>, <a href="OpenSUSE">OpenSUSE</a>,
	    and <a href="ubuntu">Ubuntu</a>.</p>
	  
	  <p>In principle, it is possible to compile the sources on
	    a <a href="ms_win64">windows</a> system. We provide no binary
	    releas. In addition, since this software is aimed at HPC use,
	    we strongly discourage this.</p>
	</div>
	<div>
	<h3>Makefile</h3>
	<p> As mentioned earlier, we don't use an automated build
	    system.</p>
	<p>Inspect
	  the <a href="https://www.gnu.org/software/make/">Makefile</a>
	  (Makefile.ubuntu). You can use it as a starting point. The
	  bundled Makefile builds
	  the <a href="http://www.warrenweckesser.net/vfgen/">vfgen</a>
	  executable as well as the sampler.</p>

	<p>Afterwards, use the Makefile by typing</p>

	<pre><code>make</code></pre>
	</div>
	<div>
	<h1>
	  <a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Short Usage hint</h1>

	<pre><code>./ode_smmala -l ./model.so -d ./experimental-data.h5 \
            -o sample.h5 -s $((3*10**4)) &gt; logfile.out

	    -l model.so
	    shared library file

	    -s N
	    sample size

	    -h 
	    prints help
	</code></pre>

	<p>The data file includes the measurement time specifications,
	  the data, the standard deviation of observations and the
	  hyperparameters &mu; and &Sigma; of the Gaussian prior. This
	  is discussed in the package documentation.</p>

	<h1>
	  <a name="hints" class="anchor" href="#hints"><span class="octicon octicon-link"></span></a>Hints</h1>

	<p>it might be helpful to specify the sample size like this in bash: </p>
	<pre><code>-s $((2**14))
	    -s $((10**6))
	</code></pre>
	<p>because <code>1e6</code> or <code>1E6</code> will not work as the sample size is read as an integer.</p>
	<p>you can load the resulting sample using any `hdf5` reading
	script language or simly <tt>h5dump</tt>. GNU Octave can read
	the sample files using the load function: <code>load
	mcmc_rank_00_of_8_sample.h5</code>.</p>
	</div>
      </section>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
